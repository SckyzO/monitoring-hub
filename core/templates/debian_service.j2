[Unit]
Description={{ description }}
Documentation={{ upstream.repo if upstream.type == 'github' else 'https://sckyzo.github.io/monitoring-hub' }}
After={{ artifacts.deb.systemd.after | join(' ') }}

[Service]
Type={{ artifacts.deb.systemd.type }}
{% if artifacts.deb.system_user %}
User={{ artifacts.deb.system_user }}
Group={{ artifacts.deb.system_user }}
{% endif %}
ExecStart=/usr/bin/{{ binary_name }}{% if artifacts.deb.systemd.arguments %} {{ artifacts.deb.systemd.arguments | join(' ') }}{% endif %}
Restart={{ artifacts.deb.systemd.restart }}
RestartSec=5

# Security hardening
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths=-/var/lib/{{ name }}
ReadWritePaths=-/var/log/{{ name }}

[Install]
WantedBy=multi-user.target
