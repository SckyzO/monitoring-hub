name: prometheus
description: The Prometheus monitoring system and time series database.
version: v3.8.1
upstream:
  type: github
  repo: prometheus/prometheus
  strategy: latest_release
build:
  method: binary_repack
  binary_name: prometheus
  extra_binaries:
    - promtool
artifacts:
  rpm:
    enabled: true
    targets:
    - el8
    - el9
    - el10
    summary: The Prometheus monitoring system and time series database.
    service_file: true
    system_user: prometheus
    extra_files:
    - source: assets/prometheus.yml
      dest: /etc/prometheus/prometheus.yml
      config: true
    directories:
    - path: /etc/prometheus
      mode: '0755'
      owner: root
      group: root
    - path: /var/lib/prometheus
      mode: '0755'
      owner: prometheus
      group: prometheus
  docker:
    enabled: true
    base_image: registry.access.redhat.com/ubi9/ubi-minimal
    entrypoint:
    - /usr/bin/prometheus
    cmd:
    - --config.file=/etc/prometheus/prometheus.yml
    - --storage.tsdb.path=/var/lib/prometheus
    smoke_test_port: 9090